<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Samuel Goldman Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Pull styles from style.css -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Samuel Goldman</h1>
    <p>Portfolio</p>
  </header>

  <div class="center-circle" id="centerCircle">
    Click to Unlock
    <div class="arrow" id="arrow"></div>
  </div>

  <script>
    const center = document.getElementById('centerCircle');
    const arrow = document.getElementById('arrow');

    const colors = [
      'linear-gradient(135deg, red, orange)',
      'linear-gradient(135deg, blue, cyan)',
      'linear-gradient(135deg, green, lime)',
      'linear-gradient(135deg, pink, violet)',
      'linear-gradient(135deg, yellow, gold)',
      'linear-gradient(135deg, orange, coral)'
    ];

    const petals = [];
    const radius = 160;
    const centerRect = center.getBoundingClientRect();
    const cx = centerRect.width / 2;
    const cy = centerRect.height / 2;

    // create petals evenly around the center (starting at top, clockwise)
    colors.forEach((color, i) => {
      const angle = (i / colors.length) * 2 * Math.PI - Math.PI / 2;
      const petal = document.createElement('div');
      petal.classList.add('petal');
      petal.style.background = color;
      petal.dataset.angle = angle;
      petal.dataset.index = i;

      const x = Math.cos(angle) * 100 + cx;
      const y = Math.sin(angle) * 100 + cy;
      petal.style.left = x + 'px';
      petal.style.top = y + 'px';

      center.appendChild(petal);
      petals.push(petal);
    });

    let clicked = 0;
    let orbiting = false;
    const speeds = petals.map(() => (Math.random() * 0.01 + 0.005));
    let time = 0;

    function showArrow(target) {
      const angle = parseFloat(petals[target].dataset.angle);
      arrow.style.transform = `translate(-50%, -100%) rotate(${angle}rad)`;
      arrow.style.opacity = 1;
    }

    function startOrbit() {
      orbiting = true;
      arrow.style.opacity = 0;

      let last = null;
      function animate(ts) {
        if (!last) last = ts;
        const dt = ts - last;
        last = ts;
        time += dt;

        petals.forEach((petal, i) => {
          const angle = parseFloat(petal.dataset.angle) + speeds[i] * time;
          const x = Math.cos(angle) * radius + cx;
          const y = Math.sin(angle) * radius + cy;
          petal.style.left = x + 'px';
          petal.style.top = y + 'px';
        });

        requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);

      // center titles cycling (big, gradient text)
      const sections = ['Work', 'About', 'Contact'];
      let idx = 0;
      setInterval(() => {
        center.innerHTML = `<span class="gradient-text">${sections[idx]}</span>`;
        idx = (idx + 1) % sections.length;
      }, 2000);
    }

    petals.forEach((petal, i) => {
      petal.addEventListener('click', () => {
        if (i !== clicked || orbiting) return; // enforce order; stop clicks once orbiting

        // move this one outward to the orbit radius
        const angle = parseFloat(petal.dataset.angle);
        const x = Math.cos(angle) * radius + cx;
        const y = Math.sin(angle) * radius + cy;
        petal.style.left = x + 'px';
        petal.style.top = y + 'px';

        clicked++;
        if (clicked < petals.length) {
          showArrow(clicked);
        } else if (!orbiting) {
          // last one done â€” start orbit
          startOrbit();
        }
      });
    });

    // start by pointing at the first (top) petal
    showArrow(0);
  </script>
</body>
</html>
