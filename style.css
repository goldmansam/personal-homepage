:root{
  --cluster-size: 720px;
  --center-size: 280px;
  --petal-size: 84px;
  --gap: 10px;
  --ease: cubic-bezier(0.25, 0.8, 0.25, 1);

  --orbit-rgb: 0,0,0;
  --orbit-line-alpha: .05;
  --orbit-text-alpha: .75;
}

*{ box-sizing:border-box }

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background:#fafafa; color:#000;
  min-height:100vh;
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
}

/* Main cluster */
.cluster{
  position:relative;
  width:var(--cluster-size); height:var(--cluster-size);
  z-index: 2;
}

/* Center circle */
.center{
  position:absolute; top:50%; left:50%;
  width:var(--center-size); height:var(--center-size);
  transform:translate(-50%,-50%); border-radius:50%;
  background:#fff; border:none;
  box-shadow:0 10px 30px rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.6);
  z-index:2; pointer-events:none;
}

/* Center label button */
.center-label{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:calc(var(--center-size) - 36px); text-align:center;
  font-size: clamp(1.25rem, calc(var(--center-size) * 0.18), 3.25rem);
  line-height:1.15; font-weight:600;
  z-index:3;
  transition:opacity .6s var(--ease), filter .6s var(--ease), transform .2s var(--ease);
  background:none; border:0; padding:0; cursor:pointer;
  color:#111;
}
.center-label:focus-visible{ outline: 2px solid rgba(0,0,0,.4); border-radius:8px }

/* Petals */
.petal{
  position:absolute; top:50%; left:50%;
  width:var(--petal-size); height:var(--petal-size);
  border-radius:50%;
  transform:translate(-50%,-50%);
  transition: transform .85s var(--ease);
  opacity:0;
}
.dot{
  width:100%; height:100%; border-radius:50%;
  box-shadow:0 6px 18px rgba(0,0,0,.16);
  opacity:.82; mix-blend-mode:multiply;
}

/* Glow guide button */
.pulse-btn{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:22px; height:22px; border-radius:50%;
  background:#fff; border:2px solid #ddd;
  filter: drop-shadow(0 0 6px rgba(255,255,255,.9));
  pointer-events:none; opacity:0; z-index:2;
}
.pulse-btn.active{
  pointer-events:auto; opacity:1; cursor:pointer;
  animation:pulse 1.5s ease-out infinite;
}
@keyframes pulse{
  0%{ box-shadow:0 0 0 0 rgba(0,0,0,.15) }
  70%{ box-shadow:0 0 0 16px rgba(0,0,0,0) }
  100%{ box-shadow:0 0 0 0 rgba(0,0,0,0) }
}

/* Petal gradients */
.g1{ background:linear-gradient(135deg,#ff6b6b,#ffb199) }
.g2{ background:linear-gradient(135deg,#4facfe,#00f2fe) }
.g3{ background:linear-gradient(135deg,#43e97b,#38f9d7) }
.g4{ background:linear-gradient(135deg,#ff9a9e,#fad0c4) }
.g5{ background:linear-gradient(135deg,#fddb92,#d1fdff) }
.g6{ background:linear-gradient(135deg,#fbc2eb,#a6c1ee) }
.g7{ background:linear-gradient(135deg,#ffecd2,#fcb69f) }
.g8{ background:linear-gradient(135deg,#cfd9df,#e2ebf0) }

/* Gradient text support */
@supports ((-webkit-background-clip: text) or (background-clip: text)){
  .gradient-text{
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
  }
  .title-gradient{
    background-image: linear-gradient(
      135deg,
      #ff6b6b, #ffb199,
      #4facfe, #00f2fe,
      #43e97b, #38f9d7,
      #ff9a9e, #fad0c4,
      #fddb92, #d1fdff,
      #fbc2eb, #a6c1ee
    );
  }
}

/* ==== Backgrounds ==== */
body::before{
  content:""; position: fixed; inset: -20% -10%;
  pointer-events: none; z-index: 0;
  background:
    radial-gradient(55% 45% at 25% 30%, rgba( 79,172,254,0.28), transparent 60%),
    radial-gradient(45% 40% at 75% 25%, rgba(255, 94,247,0.24), transparent 60%),
    radial-gradient(50% 45% at 60% 75%, rgba( 67,233,123,0.22), transparent 60%),
    radial-gradient(40% 35% at 40% 65%, rgba(255,210,112,0.18), transparent 60%);
  filter: blur(60px) saturate(160%);
  animation: auroraDrift 34s ease-in-out infinite alternate, auroraHue 90s linear infinite;
}
body.reading::before{
  filter: blur(60px) saturate(100%) brightness(0.96);
}

.cluster::before{
  content:""; position: absolute; inset: 0; pointer-events: none; z-index: 0; border-radius: 50%;
  opacity: .55;
  background: repeating-radial-gradient(circle at 50% 50%,
    rgba(var(--orbit-rgb), var(--orbit-line-alpha)) 0 1px,
    transparent 1px 28px);
  animation: ringsSpin 90s linear infinite;
}

/* Enclosing ring */
.enclosing-ring{
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 90vmin; height: 90vmin;
  border: 2px dashed rgba(255,255,255,0.22);
  border-radius: 50%;
  z-index: 1; pointer-events:none;
  animation: rotate-ring 30s linear infinite;
}

/* Starfield + sparks */
.starry-background{ position: fixed; inset: 0; z-index: 1; pointer-events: none; }
.star{
  position: absolute; width: 2px; height: 2px; border-radius: 50%;
  background: white; opacity: 0.8; animation: twinkle 3s infinite ease-in-out;
}
.spark{
  position: absolute; width: 2px; height: 2px; border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,1), rgba(255,255,255,0));
  opacity: 0.9; filter: drop-shadow(0 0 6px rgba(255,255,255,.9));
  pointer-events:none; animation: fly 5s linear forwards;
}

/* ==== Overlay (section view) ==== */
.overlay{
  position: fixed; inset: 0; z-index: 5;
  background:#fff;
  clip-path: circle(var(--clipR, 0px) at var(--clipX, 50%) var(--clipY, 50%));
  transition: clip-path 800ms var(--ease);
  will-change: clip-path;
  pointer-events: none; opacity: 0;
}
.overlay.visible{ pointer-events: auto; opacity: 1; }
.overlay.open{ clip-path: circle(150vmax at 50% 50%); }

.overlay-inner{ position:relative; width:100%; height:100%; display:flex; flex-direction:column; }
.close-btn{
  position:absolute; top:16px; right:16px;
  width:38px; height:38px; border-radius:50%;
  border:1px solid #e6e6e6; background:#fff; cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
}
.close-btn:hover{ transform:translateY(-1px) }
.close-btn:focus-visible{ outline:2px solid rgba(0,0,0,.4) }

.section-header{ display:flex; align-items:center; justify-content:center; padding:36px 16px 12px; }
.section-title{
  font-size: clamp(1.6rem, 4vw, 3rem); font-weight:700; line-height:1.1;
  background-image: linear-gradient(135deg,#ff6b6b,#ffb199);
}

.section-content{
  flex:1; max-width: min(100%, 1100px);
  margin: 0 auto; padding: 16px clamp(16px, 4vw, 40px) 40px;
  overflow:auto;
}

/* Petals become fixed when on perimeter */
.petal.perimeter{
  position: fixed; top:0; left:0; z-index: 6;
  will-change: transform;
}

/* Keyframes */
@keyframes rotate-ring { from { transform: translate(-50%,-50%) rotate(0deg) } to { transform: translate(-50%,-50%) rotate(360deg) } }
@keyframes auroraDrift { from { transform: translate3d(-3%,-2%,0) rotate(0.3deg) } to { transform: translate3d(3%,2%,0) rotate(-0.3deg) } }
@keyframes auroraHue   { from { filter: blur(60px) saturate(160%) hue-rotate(0deg) } to { filter: blur(60px) saturate(160%) hue-rotate(360deg) } }
@keyframes ringsSpin   { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
@keyframes twinkle     { 0%,100% { opacity:.25; transform: scale(0.6) } 50% { opacity:.95; transform: scale(1.25) } }
@keyframes fly         { 0% { transform: translate(0,0) scale(0.6); opacity:0 } 10%{ opacity:1 } 100%{ transform: translate(100vw,-100vh) scale(1.6); opacity:0 } }

@media (prefers-reduced-motion: reduce){
  .petal,.pulse-btn{ transition:none !important; animation:none !important }
  body::before, .cluster::before, .enclosing-ring, .overlay { animation: none !important; transition: none !important; }
}